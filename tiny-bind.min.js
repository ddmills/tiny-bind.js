!function(n){function t(n,t,i){this.binding=n,this.node=i,this.type=t,this.getVal=s[t],this.handle=o[t],c[t](this),this.handle(n.get())}function i(n){this.val="",this.name=n,this.contributors=[],this.subscribers=[]}function e(n){return[].slice.call(document.querySelectorAll(n))}var o={html:function(n){this.node.innerHTML=n},value:function(n){this.node.value=n},show:function(n){this.node.style.display=n?"block":"none"},checked:function(n){this.node.checked=n}},s={html:function(){return this.innerHTML},value:function(){return this.node.value},show:function(){return"block"==this.node.display},checked:function(){return this.node.checked}},c={html:function(){},value:function(n){n.node.addEventListener("input",function(){n.binding.set(n.getVal())})},show:function(){},checked:function(n){n.node.addEventListener("click",function(){n.binding.set(n.getVal())})}},h=["html","value","show","checked"];i.prototype.set=function(n){n!=this.val&&(this.val=n,this.notify(this.val))},i.prototype.get=function(){return this.val},i.prototype.trigger=function(){this.notify(this.val)},i.prototype.notify=function(n){this.contributors.forEach(function(t){t.handle(n)}),this.subscribers.forEach(function(t){t(n)})},i.prototype.subscribe=function(n){n(this.val),this.subscribers.push(n)},i.prototype.attach=function(n,i){var e=new t(this,n,i);return this.contributors.push(e),e},n.tiny={bindings:{},bind:function(n,t,o,s){var c=this;return e(t).forEach(function(t){o in c.bindings||(c.bindings[o]=new i(o)),c.bindings[o].attach(n,t),s&&c.bindings[o].set(s)}),c.bindings[o]},show:function(n,t,i){this.bind("show",n,t,i)},html:function(n,t,i){this.bind("html",n,t,i)},value:function(n,t,i){this.bind("value",n,t,i)},checked:function(n,t,i){this.bind("checked",n,t,i)},init:function(n){n=n?n:"tiny-",h.forEach(function(t){var o="["+n+t+"]";e(o).forEach(function(e){var o=e.getAttribute(n+t);o in tiny.bindings||(tiny.bindings[o]=new i(o)),tiny.bindings[o].attach(t,e)})})}}}(this);
