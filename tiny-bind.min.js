!function(t){function n(t,n,i,e){this.binding=t,this.node=i,this.attrString=e,this.type=n,this.getVal=h[n],this.handle=r[n],c[n](this),this.handle(t.value())}function i(t,n){this.val="",this.name=t,n&&n.bind(this),this.bindings={},this.contributors=[],this.subscribers=[]}function e(t){return"["+tiny.prefix+t+"]"}function o(t){return[].slice.call(document.querySelectorAll(t))}function s(t,n,e){var o=t.split("."),s=n?n:tiny.root;return o.forEach(function(t){"$root"==t?s=tiny.root:"$index"==t||"$key"==t||"$value"==t?s=s.bindings[e]:(t in s.bindings||(s.bindings[t]=new i(t,s)),s=s.bindings[t])}),s}var r={html:function(t){this.node.innerHTML="$index"==this.attrString||"$key"==this.attrString?this.binding.name:"object"==typeof t?JSON.stringify(t):t},value:function(t){this.node.value=t},show:function(t){this.node.style.display=t?"block":"none"},showInline:function(t){this.node.style.display=t?"inline-block":"none"},checked:function(t){this.node.checked=t},"for":function(t){this.node.innerHTML="";var n=this,i=[];for(key in t)t.hasOwnProperty(key)&&(n.node.innerHTML+=n.template,i.push(key));for(var e=n.node.getElementsByTagName("*"),o=0;o<i.length;o++)for(var r=0;r<n.templateSize;r++){var h=e[o*n.templateSize+r];u.forEach(function(t){if(h.hasAttribute(tiny.prefix+t)){var i=h.getAttribute(tiny.prefix+t),e=s(i,n.binding,o);e.attach(t,i,h)}})}}},h={html:function(){return this.innerHTML},value:function(){return this.node.value},show:function(){return"block"==this.node.display},showInline:function(){return"inline-block"==this.node.display},checked:function(){return this.node.checked}},c={html:function(){},value:function(t){t.node.addEventListener("input",function(){t.binding.set(t.getVal())})},show:function(){},showInline:function(){},checked:function(t){t.node.addEventListener("click",function(){t.binding.set(t.getVal())})},"for":function(t){t.templateSize=t.node.getElementsByTagName("*").length,t.template=t.node.innerHTML,t.node.innerHTML=""}},u=["for","html","value","show","showInline","checked"];i.prototype.bind=function(t){t.setContext(this),this.bindings[t.name]=t},i.prototype.setContext=function(t){this.context=t},i.prototype.set=function(t){if("object"==typeof t){this.val=t;for(key in t)key in this.bindings||(this.bindings[key]=new i(key,this)),this.bindings[key].set(t[key])}else t!=this.val&&(this.val=t,this.notify(this.val),this.context&&this.context.trigger())},i.prototype.value=function(){if(Object.keys(this.bindings).length>0){var t={};for(key in this.bindings)t[key]=this.bindings[key].value();this.val=t}return this.val},i.prototype.get=function(t){return this.bindings[t]},i.prototype.trigger=function(){(this.contributors.length>0||this.subscribers.length>0)&&this.notify(this.value()),this.context&&this.context.trigger()},i.prototype.notify=function(t){this.contributors.forEach(function(n){n.handle(t)}),this.subscribers.forEach(function(n){n(t)})},i.prototype.subscribe=function(t){t(this.val),this.subscribers.push(t)},i.prototype.attach=function(t,i,e){var o=new n(this,t,e,i);return this.contributors.push(o),o},t.tiny={prefix:"tiny-",root:new i("$root",null),bindings:{},init:function(t){tiny.prefix=t?t:"tiny-",u.forEach(function(t){o(e(t)).forEach(function(n){var i=n.getAttribute(tiny.prefix+t),e=s(i);e.attach(t,i,n)})})},"new":function(t){return new i(t,tiny.root)},set:function(t,n){var i=s(t);i.set(n)},get:function(t){return s(t)}}}(this);
